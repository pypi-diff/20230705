# Comparing `tmp/pyHana-0.0.2a4-py3-none-any.whl.zip` & `tmp/pyHana-0.0.2a5-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,29 +1,30 @@
-Zip file size: 31028 bytes, number of entries: 27
+Zip file size: 33797 bytes, number of entries: 28
 -rw-rw-rw-  2.0 fat       85 b- defN 23-Jun-25 16:00 pyHana/__init__.py
--rw-rw-rw-  2.0 fat       28 b- defN 23-Jun-04 13:58 pyHana/analysis/__init__.py
--rw-rw-rw-  2.0 fat    16752 b- defN 23-Jun-28 14:17 pyHana/analysis/stockEcoIndex.py
--rw-rw-rw-  2.0 fat       48 b- defN 23-Jun-09 22:21 pyHana/common/__init__.py
--rw-rw-rw-  2.0 fat     2827 b- defN 23-Jun-29 12:26 pyHana/common/code.py
--rw-rw-rw-  2.0 fat      624 b- defN 23-Jun-24 14:46 pyHana/common/conf.py
+-rw-rw-rw-  2.0 fat       45 b- defN 23-Jul-04 11:04 pyHana/analysis/__init__.py
+-rw-rw-rw-  2.0 fat     5196 b- defN 23-Jul-04 13:59 pyHana/analysis/movingAverage.py
+-rw-rw-rw-  2.0 fat    16670 b- defN 23-Jul-04 13:25 pyHana/analysis/stockEcoIndex.py
+-rw-rw-rw-  2.0 fat       55 b- defN 23-Jun-29 15:28 pyHana/common/__init__.py
+-rw-rw-rw-  2.0 fat     2356 b- defN 23-Jul-04 13:24 pyHana/common/code.py
+-rw-rw-rw-  2.0 fat      626 b- defN 23-Jul-03 14:20 pyHana/common/conf.py
 -rw-rw-rw-  2.0 fat     1535 b- defN 23-Jun-26 14:01 pyHana/common/dataProc.py
 -rw-rw-rw-  2.0 fat     5047 b- defN 23-Jun-08 04:17 pyHana/common/graph.py
 -rw-rw-rw-  2.0 fat      681 b- defN 23-Jun-20 14:05 pyHana/common/urlProc.py
 -rw-rw-rw-  2.0 fat       64 b- defN 23-Jun-29 14:00 pyHana/dataSync/__init__.py
--rw-rw-rw-  2.0 fat     3541 b- defN 23-Jun-25 14:36 pyHana/dataSync/dartSync.py
--rw-rw-rw-  2.0 fat    12955 b- defN 23-Jun-28 14:01 pyHana/dataSync/ebestSync.py
--rw-rw-rw-  2.0 fat     2083 b- defN 23-Jun-25 14:36 pyHana/dataSync/kindSync.py
--rw-rw-rw-  2.0 fat      348 b- defN 23-Jun-25 14:40 pyHana/dataSync/marketIndexSync.py
+-rw-rw-rw-  2.0 fat     3535 b- defN 23-Jul-01 13:46 pyHana/dataSync/dartSync.py
+-rw-rw-rw-  2.0 fat    13191 b- defN 23-Jul-04 12:43 pyHana/dataSync/ebestSync.py
+-rw-rw-rw-  2.0 fat     4342 b- defN 23-Jul-01 14:07 pyHana/dataSync/kindSync.py
+-rw-rw-rw-  2.0 fat      380 b- defN 23-Jul-01 14:21 pyHana/dataSync/marketIndexSync.py
 -rw-rw-rw-  2.0 fat       73 b- defN 23-Jun-25 07:13 pyHana/innerIO/__init__.py
--rw-rw-rw-  2.0 fat     1675 b- defN 23-Jun-25 15:46 pyHana/innerIO/companyInfo.py
+-rw-rw-rw-  2.0 fat     1772 b- defN 23-Jul-04 12:54 pyHana/innerIO/companyInfo.py
 -rw-rw-rw-  2.0 fat     2208 b- defN 23-Jun-25 14:36 pyHana/innerIO/marketIndex.py
--rw-rw-rw-  2.0 fat     5646 b- defN 23-Jun-29 03:45 pyHana/innerIO/stockInfo.py
+-rw-rw-rw-  2.0 fat     4938 b- defN 23-Jul-01 15:23 pyHana/innerIO/stockInfo.py
 -rw-rw-rw-  2.0 fat       72 b- defN 23-Jun-24 12:59 pyHana/outerIO/__init__.py
--rw-rw-rw-  2.0 fat     5465 b- defN 23-Jun-25 05:55 pyHana/outerIO/dart.py
+-rw-rw-rw-  2.0 fat     5640 b- defN 23-Jul-01 13:46 pyHana/outerIO/dart.py
 -rw-rw-rw-  2.0 fat    15300 b- defN 23-Jun-28 14:01 pyHana/outerIO/ebest.py
--rw-rw-rw-  2.0 fat     6535 b- defN 23-Jun-25 04:27 pyHana/outerIO/kind.py
--rw-rw-rw-  2.0 fat     1800 b- defN 23-Jun-24 12:01 pyHana/outerIO/marketIndex.py
--rw-rw-rw-  2.0 fat      638 b- defN 23-Jun-29 15:39 pyHana-0.0.2a4.dist-info/METADATA
--rw-rw-rw-  2.0 fat       92 b- defN 23-Jun-29 15:39 pyHana-0.0.2a4.dist-info/WHEEL
--rw-rw-rw-  2.0 fat        7 b- defN 23-Jun-29 15:39 pyHana-0.0.2a4.dist-info/top_level.txt
--rw-rw-r--  2.0 fat     2190 b- defN 23-Jun-29 15:39 pyHana-0.0.2a4.dist-info/RECORD
-27 files, 88319 bytes uncompressed, 27508 bytes compressed:  68.9%
+-rw-rw-rw-  2.0 fat     7605 b- defN 23-Jul-01 14:11 pyHana/outerIO/kind.py
+-rw-rw-rw-  2.0 fat     1882 b- defN 23-Jul-01 14:17 pyHana/outerIO/marketIndex.py
+-rw-rw-rw-  2.0 fat      638 b- defN 23-Jul-05 03:42 pyHana-0.0.2a5.dist-info/METADATA
+-rw-rw-rw-  2.0 fat       92 b- defN 23-Jul-05 03:42 pyHana-0.0.2a5.dist-info/WHEEL
+-rw-rw-rw-  2.0 fat        7 b- defN 23-Jul-05 03:42 pyHana-0.0.2a5.dist-info/top_level.txt
+-rw-rw-r--  2.0 fat     2279 b- defN 23-Jul-05 03:42 pyHana-0.0.2a5.dist-info/RECORD
+28 files, 96314 bytes uncompressed, 30137 bytes compressed:  68.7%
```

## zipnote {}

```diff
@@ -1,13 +1,16 @@
 Filename: pyHana/__init__.py
 Comment: 
 
 Filename: pyHana/analysis/__init__.py
 Comment: 
 
+Filename: pyHana/analysis/movingAverage.py
+Comment: 
+
 Filename: pyHana/analysis/stockEcoIndex.py
 Comment: 
 
 Filename: pyHana/common/__init__.py
 Comment: 
 
 Filename: pyHana/common/code.py
@@ -63,20 +66,20 @@
 
 Filename: pyHana/outerIO/kind.py
 Comment: 
 
 Filename: pyHana/outerIO/marketIndex.py
 Comment: 
 
-Filename: pyHana-0.0.2a4.dist-info/METADATA
+Filename: pyHana-0.0.2a5.dist-info/METADATA
 Comment: 
 
-Filename: pyHana-0.0.2a4.dist-info/WHEEL
+Filename: pyHana-0.0.2a5.dist-info/WHEEL
 Comment: 
 
-Filename: pyHana-0.0.2a4.dist-info/top_level.txt
+Filename: pyHana-0.0.2a5.dist-info/top_level.txt
 Comment: 
 
-Filename: pyHana-0.0.2a4.dist-info/RECORD
+Filename: pyHana-0.0.2a5.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## pyHana/analysis/__init__.py

```diff
@@ -1 +1 @@
-__all__ =  ['stockEcoIndex']
+__all__ =  ['stockEcoIndex', 'movingAverage']
```

## pyHana/analysis/stockEcoIndex.py

```diff
@@ -137,15 +137,15 @@
         resData.append( data + [stockCnt, tradeAmt, feeAmt, taxAmt, cashAmt, cashAmt + stockCnt * stockPrice] )             
         
     return pd.DataFrame(resData, columns=['거래일자', priceType, 'Index기준일자', indexNm, 'Signal',
                                           '보유주수','거래금액', '수수료', '거래세', '현금', '평가금액'])
 
 def GetIndexValueList(indexNm):
     if indexNm not in ('BDI','BCI','BPI','BSI'):
-        print(indexNm, flush=True)
+        # print(indexNm, flush=True)
         retVal = sd.ReadEbestMarketIndexInfo(indexNm)['data']
         retVal = [[x[0], float(x[1])] for x in retVal]
     else:
         retVal = de.ReadMarketIndex(indexNm, objTyp='list')['data']
     
     return retVal
 
@@ -191,17 +191,16 @@
         if type(shCodes) == type(pd.DataFrame([])):
             shCodes = shCodes.values.tolist()  
         
         print(dt.datetime.now().strftime('%Y-%m-%d %H:%M:%S'), 'total cnt >> ', len(shCodes))
 
         for i, shCode in enumerate(shCodes):
             
-            # shName = dfStock['종목명'].iloc[i]
-            # shName = sd.ReadStockItemInfo(shCode)['종목명'][0]
-            shName = code._GetCmpnyName(shCode)
+            shName  = code._GetCmpnyName(shCode)['종목명']
+            shName = shName.iloc[0] if len(shName) > 0 else ''   
 
             listStock = sd.ReadStockTrade(shCode)[['일자', priceType]].values.tolist()
 
             # 주가정보와 지표정보를 선행 기준에 의해 병합
             mergeData = _MergeStockIndex(listStock, listMarketIndex, sDate, eDate, advance)
 
             # 병합한 데이터로 거래 simulation 수행 
@@ -257,18 +256,18 @@
     else:
         columns=['종목코드','종목명','상관계수', 'p-value', '분석대상건수']
 
     print(dt.datetime.now().strftime('%Y-%m-%d %H:%M:%S'), 'total cnt >> ', len(shCodes))
 
     resData = []   
     for i, shCode in enumerate(shCodes):
-        
-        # shName = dfStock['종목명'].iloc[i]
-        # shName = sd.ReadStockItemInfo(shCode)['종목명'][0]
-        shName = code._GetCmpnyName(shCode)
+
+        shName  = code._GetCmpnyName(shCode)['종목명']
+        shName = shName.iloc[0] if len(shName) > 0 else ''   
+
 
         listStock = sd.ReadStockTrade(shCode)[['일자', priceType]].values.tolist()
 
         # 주가정보와 지표정보를 선행 기준에 의해 병합
         mergeData = _MergeStockIndex(listStock, listMarketIndex, sDate, eDate, advance)
 
         # 병합한 데이터로 Correlation Value 계산
```

## pyHana/common/__init__.py

```diff
@@ -1 +1 @@
-__all__ =  ['conf','dataProc','graph','urlProc']
+__all__ =  ['code','conf','dataProc','graph','urlProc']
```

## pyHana/common/code.py

```diff
@@ -1,10 +1,19 @@
 from . import conf, dataProc
 import pandas as pd
 
+
+# 증권사에서 조회한 데이터를 파일로 저장하여, 데이터 분석 시 사용 (분석 수행 시 증권사 IF 최소화)
+# 화면별 저장할 컬럼 정의
+saveColumns = {
+    "일별주가" : ['일자', '시가', '고가', '저가', '종가', '거래량', '거래대금'],
+    "t3518"    : ['일자', '종가'],
+}
+
+
 # 금감원과 이베스트 증권에서 관리하는 회사명이 다름
 
 # 금감원 자료 처리시에 사용
 def _GetShcodeDart(title):    
     filePathNm = conf.companyInfoPath + "/기업list(금감원).pkl"    
     stockItemList = dataProc.ReadPickleFile(filePathNm)    
                
@@ -31,59 +40,35 @@
     if len(itemList) == 0:
         itemList = _GetShcodeDart(srchItem) 
     
     return itemList
 
 
 # 회사명, 종목코드 추출 시 기본적으로 ebest 데이터 사용
-def _GetShcode(title, gb=''):    
-    retVal = []
-    
-    filePathNm = conf.stockInfoPath + "/stockitem_info.pkl"    
-    stockItemList = dataProc.ReadPickleFile(filePathNm)    
+# def _GetShcode(title):    
+#     filePathNm = conf.stockInfoPath + "/stockitem_list.pkl"    
+#     df = dataProc.ReadPickleFile(filePathNm)    
 
-    if gb =='LIKE':
-        for shCode in stockItemList['data'].keys():
-            if title in stockItemList['data'][shCode]['hName']:
-                retVal.append([shCode, stockItemList['data'][shCode]['hName']])
-    else:
-        for shCode in stockItemList['data'].keys():
-            if title == stockItemList['data'][shCode]['hName']:
-                retVal = [shCode, stockItemList['data'][shCode]['hName']]
-                break
-    
-    return retVal
+#     return df[df['종목명']==title]
 
 def _GetCmpnyName(shCode):    
-    filePathNm = conf.stockInfoPath + "/stockitem_info.pkl"    
-    stockItemList = dataProc.ReadPickleFile(filePathNm)    
-    
-    if stockItemList['data'].get(shCode):
-        retVal = [ shCode, stockItemList['data'][shCode]['hName']  ]
-    else:
-        retVal = []
-               
-    return retVal
+    df = dataProc.ReadPickleFile( conf.stockInfoPath + "/stockitem_list.pkl" )    
 
-def _GetStockItemList(srchItem):
-    stockItem = _GetCmpnyName(srchItem)
-    if len(stockItem) == 0:
-        stockItem = _GetShcode(srchItem) 
-    
-    return stockItem
+    return df[df['종목코드']==shCode]
 
+def GetStockItem(srchItem):
+    df = dataProc.ReadPickleFile( conf.stockInfoPath + "/stockitem_list.pkl" )    
 
-def _GetStockItemListAll():   
+    dfRes = df[df['종목명']==srchItem] 
+    if len(dfRes) == 0:
+        dfRes = df[df['종목코드']==srchItem]
+    
+    return dfRes
+
+def GetStockItemListAll(title=''):   
     """
     종목명 return
     """
-    filePathNm = conf.stockInfoPath + "/stockitem_info.pkl"
-    currData = dataProc.ReadPickleFile(filePathNm)
-
-    retVal = []
-    for key, _ in currData['data'].items():
-        if currData['data'][key].get('hName'):
-            retVal.append([key, currData['data'][key]['hName']])                      
-
-    retVal = pd.DataFrame(retVal, columns=['종목코드','종목명'])
+    filePathNm = conf.stockInfoPath + "/stockitem_list.pkl"
+    df = dataProc.ReadPickleFile(filePathNm)
 
-    return retVal    
+    return df[df['종목명'].str.contains(title)]
```

## pyHana/common/conf.py

```diff
@@ -2,15 +2,15 @@
 import configparser
 
 # 설정파일 읽기
 configPath = os.environ['PyhanaConfigPath']
 config = configparser.ConfigParser()    
 config.read(configPath+'/config.ini', encoding='utf-8') 
 
-print(configPath+'/config.ini')
+# print(configPath+'/config.ini')
 
 ebestId  = config['ebest']['id']
 ebestPwd = config['ebest']['pwd']
 certPwd  = config['ebest']['certpwd']
 xingAPIRes = config['ebest']['xingAPIRes']
 
 basePath        = config['path']['base']
```

## pyHana/dataSync/dartSync.py

```diff
@@ -4,16 +4,15 @@
 import pandas as pd
 
 
 def SyncCmpnyList():
 
     filePathNm = conf.companyInfoPath + "/기업list(금감원).pkl"
 
-    resData, columns = dart.GetCmpnyList()
-    dfData = pd.DataFrame(resData, columns=columns)
+    dfData = dart.GetCmpnyList()
 
     currData = {} 
     currData['회사명'] = {} 
     currData['종목코드'] = {} 
 
     for i in range(len(dfData)):
         title = dfData['회사명'].iloc[i]
@@ -30,15 +29,18 @@
     filePathNm = conf.companyInfoPath + "/기업list(금감원).pkl"    
     stockItemList = dataProc.ReadPickleFile(filePathNm)    
 
 
     filePathNm = conf.companyInfoPath + "/재무정보(금감원).pkl"
 
     # selectToc : 0 (연결재무제표), 5(재무제표)    
-    resData, columns = dart.GetCmpnyAcntInfo(year, quarter, selectToc=selectToc, currentPageSize=currentPageSize)
+    df = dart.GetCmpnyAcntInfo(year, quarter, selectToc=selectToc, currentPageSize=currentPageSize)
+
+    resData = df.values.tolist()
+    columns = df.columns.tolist()
 
     # print(resData)
 
     # 기존 데이터 read
     currData = dataProc.ReadPickleFile(filePathNm)
 
     if not currData.get('data'):
```

## pyHana/dataSync/ebestSync.py

```diff
@@ -6,14 +6,23 @@
 import sys, os
 # here = os.path.dirname(__file__)
 # sys.path.append(os.path.join(here, '..'))
 from   ..common   import conf, dataProc
 from   ..outerIO  import ebest      as eb
 from   ..innerIO  import stockInfo  as sd
 
+def SynchStockItemList():
+    ebest = eb.Ebest(login=True, debug=False)
+
+    df = ebest.GetStockItemList('0')
+    
+    filePathNm = conf.stockInfoPath + "/stockitem_list.pkl"
+    dataProc.WritePickleFile(filePathNm, df)        
+   
+
 def SynchStockItemInfo(in_shCode='', gubun='0', updateInfoType='0', frProcCnt=1, toProcCnt=99999, allRedoInd=False): 
     """ 
     shCode : 종목코드가 있는 경우 특정종목만 수행. gubun 값은 무시
     gubun : '0'(전체) '1'(코스피) '2'(코스닥) 
     updateInfoType : '0'(전체 : 종목리스트 + 기업정보) '1'(종목 리스트 only)
 
     frProcCnt / toProcCnt : 속도 이슈 (10분당 200건만 조회가능)로 중간에 작업 중단 현상 발생. 작업 분할 시 사용
@@ -147,15 +156,15 @@
             shcodeList += dfStock['단축코드'].values.tolist()
         
     print(dt.datetime.now().strftime('%Y-%m-%d %H:%M:%S'), 'total cnt >> ', len(shcodeList))
 
     getList = []
     for i, shcode in enumerate(shcodeList):        
 
-        df = sd.ReadStockTrade(shcode, 't8410')
+        df = sd.ReadStockTrade(shcode) #, 't8410')
 
         if type(df) != list:
             df = df.values.tolist()
 
         if len(df) > 0:
             if periodKnd == 'ALL' and sDate < df[0][0]:
                 getList.append([shcode, sDate, df[0][0]])
@@ -188,15 +197,15 @@
                 del ebest
                 ebest = eb.Ebest(login=True, debug=False)
 
             except:
                 print("오류발생")
 
         # # 파일에 저장
-        sd._SaveStockTrade('t8410', shcode, dfStock[['날짜','시가', '고가', '저가', '종가', '거래량', '거래대금']])    
+        sd._SaveStockTrade(shcode, dfStock[['날짜','시가', '고가', '저가', '종가', '거래량', '거래대금']])    
 
         if (i + 1) % 5 == 0:
             print(dt.datetime.now().strftime('%Y-%m-%d %H:%M:%S'), 'proc_cnt >> ', i+1)    
             
     ebest.CommDisConnect()
     time.sleep(2)
     del ebest
```

## pyHana/dataSync/kindSync.py

```diff
@@ -1,24 +1,75 @@
 # from   ..common   import conf, dataProc
 from ..outerIO  import kind
 from ..common   import conf, dataProc
+from ..innerIO  import stockInfo  as sd
+import pandas   as pd
+import datetime
+
+def SynchDailyStockTradeInfo(sDate, eDate):
+
+    print('\r' + datetime.datetime.now().strftime('%Y-%m-%d %H:%M:%S'), ': 데이터 추출 시작')    
+    
+    tradeList = []
+    
+    curDt = sDate
+    while curDt <= eDate:
+        df = kind.GetStockTradeInfo(curDt)    
+        columns = df.columns.tolist()    
+        tradeList += df.values.tolist()
+            
+        curDt = (datetime.datetime.strptime(curDt, "%Y%m%d") + datetime.timedelta(days=1)).strftime("%Y%m%d")     
+        
+        
+    print('\n' + datetime.datetime.now().strftime('%Y-%m-%d %H:%M:%S'), ': 데이터 저장 시작')   
+    df = pd.DataFrame(tradeList, columns=columns)
+    df = df[df['시가']!='-']
+
+    shCodeList = sorted(df['종목코드'].unique())
+    for i, shCode in enumerate(shCodeList):
+        # # 파일에 저장
+        sd._SaveStockTrade(shCode, df[df['종목코드']==shCode][['일자', '시가', '고가', '저가', '종가', '거래량', '거래대금']].values.tolist() )    
+
+        print('\r' + datetime.datetime.now().strftime('%Y-%m-%d %H:%M:%S'), ': 전체대상(' + str(len(shCodeList)) + '), 완료(' + str((i+1)) + '), 종목코드('  + shCode + ')', end='')            
+    
+    print('\n' + datetime.datetime.now().strftime('%Y-%m-%d %H:%M:%S'), ' 데이터 저장 완료')   
+
+# def SynchDailyStockTradeInfo(sDate, eDate):
+
+#     curDt = sDate
+#     while curDt <= eDate:
+#         x, columns = kind.GetStockTradeInfo(curDt)
+#         df = pd.DataFrame(x, columns=columns)
+#         df = df[df['시가']!='-']
+
+#         if len(df) > 0:
+#             print('')
+#             for i in range(len(df)):
+#                 # # 파일에 저장
+#                 sd._SaveStockTrade('일별주가', df['종목코드'].iloc[i], [df[['일자', '시가', '고가', '저가', '종가', '거래량', '거래대금']].iloc[i].tolist()])    
+
+#                 print('\r' + curDt, (i+1), '/',  len(df), end='')
+#             curDt = (datetime.datetime.strptime(curDt, "%Y%m%d") + datetime.timedelta(days=1)).strftime("%Y%m%d")     
+#             print(' 완료')
 
 def SyncDividendInfo(sYear, eYear, currentPageSize = 100, marketType='', settlementMonth='', selYearCnt = 3):
     filePathNm = conf.companyInfoPath + "/주식배당정보(한국거래소).pkl"
 
     for selYear in range(eYear, sYear-1, -1*selYearCnt):
         if selYear >= (sYear + selYearCnt):
             print(selYear, selYearCnt)
             yearCnt = selYearCnt
         else:
             print(selYear, selYear - sYear + 1)
             yearCnt = selYear - sYear + 1
 
-        resData, columns = kind.GetDividendInfo(selYear, currentPageSize, marketType, settlementMonth, yearCnt)
+        df = kind.GetDividendInfo(selYear, currentPageSize, marketType, settlementMonth, yearCnt)
 
+        resData = df.values.tolist()
+        columns = df.columns.tolist()[2:]
 
         # 기존 데이터 read
         currData = dataProc.ReadPickleFile(filePathNm)
 
         if not currData.get('data'):
             currData['data'] = {}   
         currData['columns'] = columns
```

## pyHana/dataSync/marketIndexSync.py

```diff
@@ -1,10 +1,11 @@
 from ..outerIO  import marketIndex as o_mi
 from ..innerIO  import marketIndex as i_mi
 
 def syncBalticIndex(sDate, eDate):
-    indexList = ['BDI','BCI','BPI','BSI']
+    df = o_mi.GetBalticIndex(sDate, eDate)
 
-    newData = o_mi.GetBalticIndex(sDate, eDate)
+    newData = df.values.tolist()
+    indexList = df.columns.tolist()[1:]    
 
     for i in range(len(indexList)):
-        i_mi.SaveMarketIndex(indexList[i], [[data[0], data[i+1]]for data in newData])    
+        i_mi.SaveMarketIndex(indexList[i], [[data[0], data[i+1]] for data in newData])
```

## pyHana/innerIO/companyInfo.py

```diff
@@ -19,23 +19,24 @@
     
     if acntInfo['data'].get(itemList[0]) and acntInfo['data'][itemList[0]].get('info'):
         for x in acntInfo['data'][itemList[0]]['info']:
             data.append( itemList + x[0:3] + 
                             [  val if type(val) == str else int(round(val / unit_list[unit], 0)) for val in x[3:] ]
                         )
     
-    return data, ['종목코드','종목명']+acntInfo['columns']
+    return pd.DataFrame(data, columns = ['종목코드','종목명']+acntInfo['columns'])
 
 
 def GetDividendInfo(srchItem):
     data = []
 
-    itemList = code._GetStockItemList(srchItem)
+    shCode = code.GetStockItem(srchItem).iloc[0][1]
+    hName  = code.GetStockItem(srchItem).iloc[0][0]
 
     filePathNm = conf.companyInfoPath + "/주식배당정보(한국거래소).pkl"
     acntInfo = dataProc.ReadPickleFile(filePathNm)        
     
-    if acntInfo['data'].get(itemList[0]) and acntInfo['data'][itemList[0]].get('info'):
-        for x in acntInfo['data'][itemList[0]]['info']:
-            data.append( itemList + x )
+    if acntInfo['data'].get(shCode) and acntInfo['data'][shCode].get('info'):
+        for x in acntInfo['data'][shCode]['info']:
+            data.append( [shCode, hName] + x )
     
-    return data, ['종목코드','종목명']+acntInfo['columns']
+    return pd.DataFrame(data, columns = ['종목코드','종목명']+acntInfo['columns'])
```

## pyHana/innerIO/stockInfo.py

```diff
@@ -1,64 +1,54 @@
 import os, sys
 import pandas as pd
 import re
 
 # here = os.path.dirname(__file__)
 # sys.path.append(os.path.join(here, '..'))
 from   ..common import conf, dataProc
+from   ..common import code
 
-# 증권사에서 조회한 데이터를 파일로 저장하여, 데이터 분석 시 사용 (분석 수행 시 증권사 IF 최소화)
-# 화면별 저장할 컬럼 정의
-saveColumns = {
-    "t8410" : ['일자', '시가', '고가', '저가', '종가', '거래량', '거래대금'],
-    "t3518" : ['일자', '종가'],
-}
-
-def _SaveStockTrade(trcode, shCode, newData):            
+def _SaveStockTrade(shCode, newData):            
 # data 분석 시 증권사 IF를 최소화 하기 위해, 증권사에서 조회한 데이터를 파일로 저장 
 # 종목코드 + 거래일자 형태의 데이터만 저장
 # 기존 + 신규 데이터 병합하여 저장.
 # 중복 row가 있는 경우 기존 데이터는 제외 처리    
                 
     # 신규 저장할 데이터, 내부적 연산 시 list형으로 통일 
     if type(newData) == type(pd.DataFrame([])):
         newData = newData.values.tolist()
     elif type(newData) != list:
         raise Exception('pyHana >> list형 또는 DataFrame 형태만 처리 가능')
 
-    # 저장 파일명 구하기. 데이터가 큰 경우 shCode 값으로 파일 분할 처리
-    # partNm = (lambda trcode, shCode: '_' + "%02d"%(int(re.sub("[^0-9]", "9", shCode)) % 99) if trcode in ["t8410"] else '')(trcode, shCode)
     filePathNm = conf.stockInfoPath + "/일별주가/" + shCode + ".pkl"            
     
     # 기존 데이터 Read
     currData = dataProc.ReadPickleFile(filePathNm)                 
     if not currData.get('columns'):
-        currData['columns'] = saveColumns[trcode]
+        currData['columns'] = code.saveColumns['일별주가']
         
     if not currData.get(shCode):
         currData[shCode] = []
 
     # 기존 데이터의 우선순위는 2, 신규 데이터는 우선순위 1로 병합 sort후 dup 제거
     currData[shCode] = dataProc._MergeData(currData[shCode], newData) 
         
     dataProc.WritePickleFile(filePathNm, currData) 
 
 
-def ReadStockTrade(shCode, trcode='t8410'):    
+def ReadStockTrade(shCode):    
 # data 분석 시 증권사 IF를 최소화 하기 위해, 증권사에서 조회한 데이터 저장한 파일에서 데이터 추출 
 
-    # 저장 파일명 구하기. 데이터가 큰 경우 shCode 값으로 파일 분할 처리
-    # partNm = (lambda trcode, shCode: '_' + "%02d"%(int(re.sub("[^0-9]", "9", shCode)) % 99) if trcode in ["t8410"] else '')(trcode, shCode)
     filePathNm = conf.stockInfoPath + "/일별주가/" + shCode + ".pkl"            
 
     currData = dataProc.ReadPickleFile(filePathNm)
         
     retVal = currData.get(shCode, [])
 
-    retVal = pd.DataFrame(retVal, columns=currData.get('columns',''))
+    retVal = pd.DataFrame(retVal, columns=code.saveColumns["일별주가"])
 
     return retVal
 
 
 def ReadStockItemInfoDetail(shCode=''):   
     """
     종목 상세정보 return
@@ -79,15 +69,17 @@
     # retVal = pd.DataFrame(retVal, columns=currData.get('columns',''))
                 # dfStock = dfStock.astype({'시가총액':'int64', '현재가':'int64', 'PER':'float64','EPS':'int64','PBR':'float64',
                 #                         'ROA':'float64','ROE':'float64','EBITDA':'float64','EVEBITDA':'float64',
                 #                         '액면가':'float64','SPS':'float64','CPS':'float64','BPS':'float64','T.PER':'float64',
                 #                         'T.EPS':'float64','PEG':'float64','T.PEG':'float64',
                 #                         '주식수':'int64','자본금':'int64','배당금':'int64','배당수익율':'float64','외국인':'float64' })    
 
-    return retVal, currData.get('columns','')
+    if len(retVal) > 0:
+        retVal = pd.DataFrame(retVal, columns=currData.get('columns',''))
+    return retVal
 
 def ReadEbestMarketIndexInfo(symbol):       
     filePathNm = conf.marketIndexPath + "/이베스트증권/" + symbol + ".pkl"
     currData = dataProc.ReadPickleFile(filePathNm)
 
     return currData    
 
@@ -103,15 +95,15 @@
     elif type(newData) != list:
         raise Exception('pyHana >> list형 또는 DataFrame 형태만 처리 가능')
 
     # 기존 데이터 Read
     filePathNm = conf.marketIndexPath + "/이베스트증권/" + symbol + ".pkl"
     currData = dataProc.ReadPickleFile(filePathNm)                 
     if not currData.get('columns'):
-        currData['columns'] = saveColumns[trcode]
+        currData['columns'] = code.saveColumns[trcode]
 
     currData['지수명']   = hname
     currData['국가']     = nation
     currData['종목종류'] = kind
 
         
     if not currData.get('data'):
```

## pyHana/outerIO/dart.py

```diff
@@ -1,10 +1,11 @@
 from   bs4      import BeautifulSoup as bs
 import time  
 import re
+import pandas  as pd
 from ..common  import urlProc
 
 def GetCmpnyAcntInfo(year, quarter, selectToc=5, currentPageSize = 100):
     # selectToc : 0 (연결재무제표), 5(재무제표)
     # reportCode : 11013(1분기), 11012(반기), 11014(3분기), 11011(사업보고서)
     if   quarter == 1:  reportCode = ['11013','1분기']
     elif quarter == 2:  reportCode = ['11012','반기']
@@ -87,15 +88,16 @@
         pgNum += 1
 
         time.sleep(0.1)
     
     totRecCnt = soup.select_one("div.page_info").text.replace(" ","").split("총")[1].replace("건]","")
     print('\r', year, reportCode[1], selectToc, ' >> 대상:', totRecCnt, '제외:', skipCnt, '', len(resData), ' '*40)
 
-    return resData, ['종목명', '결산월', '기준년도', '기준분기', '보고서종류'] + columns
+    # return resData, ['종목명', '결산월', '기준년도', '기준분기', '보고서종류'] + columns
+    return pd.DataFrame(resData, columns = ['종목명', '결산월', '기준년도', '기준분기', '보고서종류'] + columns)
 
 
 def GetCmpnyList():
     columns = ['회사명','종목코드']
     
     resData = []
 
@@ -130,9 +132,8 @@
             pgNum += 1
 
             time.sleep(0.1)
 
         totRecCnt = soup.select_one("div.pageInfo").text.replace(" ","").split("총")[1].replace("건]","")
         print('\ncorporationType(', corpType, ') : ', totRecCnt, '건 추출')
 
-    return resData, columns
-
+    return pd.DataFrame(resData, columns=columns)
```

## pyHana/outerIO/kind.py

```diff
@@ -1,24 +1,45 @@
 from   bs4      import BeautifulSoup as bs
 import time  
 import re
-from ..common  import urlProc
-    
+import pandas   as pd
+from ..common   import urlProc
+import json    
 
 # Url에서 특정 조회조건의 값을 추출
 # GetUrlAttrValue = lambda url, key: [x for x in url.split('&') if x[0:len(key)] == key][0].split('=')[1]
 
+def GetStockTradeInfo(srchDt):
+    urlTmp = "http://data.krx.co.kr/comm/bldAttendant/getJsonData.cmd?bld=dbms/MDC/STAT/standard/MDCSTAT01501&locale=ko_KR&mktId=ALL&share=1&money=1&csvxls_isNo=false&trdDd={}"
+        
+    url = urlTmp.format(srchDt)
+    res = urlProc.requests_url_call(url)    
+    dList = json.loads(res.text)['OutBlock_1']
+
+    rData = []
+
+    for data in dList:
+        rData.append([ data['ISU_SRT_CD'], data['ISU_ABBRV'], srchDt, 
+                      data['TDD_OPNPRC'].replace(",",""), data['TDD_HGPRC'].replace(",",""), 
+                      data['TDD_LWPRC'].replace(",",""), data['TDD_CLSPRC'].replace(",",""), 
+                      data['ACC_TRDVOL'].replace(",",""), 
+                      str(int(int(data['ACC_TRDVAL'].replace(",",""))/1000000))
+                      ])
+        
+    return pd.DataFrame( rData, columns=['종목코드', '종목명', '일자', '시가', '고가', '저가', '종가', '거래량', '거래대금'] )
+
+
 def GetDividendInfo(selYear, currentPageSize = 100, marketType='', settlementMonth='', yearCnt = 3):
     # currentPageSize(페이지당 조회건수) : 15 / 30 / 50 / 100
     # marketType(시장구분) : 전체 '', 유가증권 '1', 코스닥 '2' 코넥스 '6' 
     # settlementMonth(결산월) : 전체 '', 1월~12월 : '01'~'12'
     # selYearCnt(최근 몇년간 조회) : 1 / 2 / 3 
     # selYear : 기준년도 (해당 년도를 기준으로 최근 이전 {selYearCnt} 년간 자료 조회)
 
-    columns = ['사업년도','결산월','업종','업종별배당율','주식배당','액면가','기말주식수',
+    columns = ['종목코드','종목명','사업년도','결산월','업종','업종별배당율','주식배당','액면가','기말주식수',
                '주당배당금','배당성향','총배당금액','시가배당율']
 
     resData = []
 
     urlTmp = "https://kind.krx.co.kr/disclosureinfo/dividendinfo.do?method=searchDividendInfoSub&forward=dividendinfo_sub"
     urlTmp += "&searchCodeType=&searchCorpName=&repIsuSrtCd=&chkOrgData=&searchCorpNameTmp="
     urlTmp += "&currentPageSize={}&marketType={}&settlementMonth={}".format(currentPageSize, marketType, settlementMonth)
@@ -63,15 +84,15 @@
         if curNum >= totNum:
             break
 
         pgNum += 1
         
         time.sleep(0.1)
     
-    return resData, columns
+    return pd.DataFrame(resData, columns=columns)
 
 # def GetFinancialInfo(year, fiscalgubun, currentPageSize = 100):
 #     columns = ['종목코드','종목명','유동자산','고정자산','자산총계','유동부채','고정부채','부채총계','자본금',
 #                '자본잉여금','이익잉여금','자본총계','매출액','영업이익','세전이익','당기순이익']
     
 #     resData = []
```

## pyHana/outerIO/marketIndex.py

```diff
@@ -1,9 +1,10 @@
 from   bs4      import BeautifulSoup as bs
 import time  
+import pandas   as pd
 
 # here = os.path.dirname(__file__)
 # sys.path.append(os.path.join(here, '..'))
 # import common.urlProc as urlProc
 from ..common  import urlProc
     
 #######################################################################3    
@@ -42,8 +43,8 @@
             res = urlProc.requests_url_call(url.format(pgNum))
             soup = bs(res.text, "html.parser")
         else:
             break
     
     resData.sort()
     
-    return resData
+    return pd.DataFrame(resData, columns=['일자', 'BDI','BCI','BPI','BSI'])
```

## Comparing `pyHana-0.0.2a4.dist-info/METADATA` & `pyHana-0.0.2a5.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: pyHana
-Version: 0.0.2a4
+Version: 0.0.2a5
 Summary: for pyhana club members
 Home-page: https://github.com/pyhana/pyHana
 Author: pyhanclub
 Author-email: pyhanclub@gmail.com
 Keywords: pyhanclub
 Classifier: Programming Language :: Python :: 3.6
 Classifier: Programming Language :: Python :: 3.7
```

## Comparing `pyHana-0.0.2a4.dist-info/RECORD` & `pyHana-0.0.2a5.dist-info/RECORD`

 * *Files 10% similar despite different names*

```diff
@@ -1,27 +1,28 @@
 pyHana/__init__.py,sha256=FKE2JGLKC7jClgKEI0Rmhb_SDPVKK4OwquO5ghyH8yQ,85
-pyHana/analysis/__init__.py,sha256=6AOF6GO_kEJVJTmBcIBqQhpmCH1GtM_NyE1iK9hVOdM,28
-pyHana/analysis/stockEcoIndex.py,sha256=nPPsU6KSwvV-85yOVnSuUum5hfSOHQ1VotWgm-fH8rw,16752
-pyHana/common/__init__.py,sha256=2ggGt-lNxJN960U-VCJX6aEBFVVYd1QZIHtwFXsqBMY,48
-pyHana/common/code.py,sha256=7AAiRfZnCSyZ-HW9vl1lpg4Y5iLeelyDhU4S3jhAimE,2827
-pyHana/common/conf.py,sha256=gZXVogXNfdox0Db6iWfLMdgFT1Z-Y3wocmkMzPARmw0,624
+pyHana/analysis/__init__.py,sha256=gyISGZ7UqDUKHQFEjbglSvk78f2cT1F3HXWCOHkoks0,45
+pyHana/analysis/movingAverage.py,sha256=-6H96ILOS7Ed1uxYLP9PhCCsfLMbTlZhecyaVV__3_U,5196
+pyHana/analysis/stockEcoIndex.py,sha256=Bkh4h0Uy7DrcrbKTL7cwtnAV7MUKn5X7rYUlaGlnLxI,16670
+pyHana/common/__init__.py,sha256=lFWGRtseD6uJBTwBYW7MxeaIyAAzAdDJoyPrcfITRyc,55
+pyHana/common/code.py,sha256=M-bMWTurXGtbo6hsp5qNHNtZcZJva6u_Ua2Xw2LBJcw,2356
+pyHana/common/conf.py,sha256=uIwHF0rbxMWP13IYTQseUU2_rPYHyZO-b9cVqGFaby0,626
 pyHana/common/dataProc.py,sha256=4wlWWcjqKPuXznCIOpMSXKtlvkfm008PFLoVzB7Px20,1535
 pyHana/common/graph.py,sha256=sK6PhesWu_dl03_3RbbuBMvGCGIj2peHKJ_d0fLo91Q,5047
 pyHana/common/urlProc.py,sha256=fW9q14hugz-htEnSoCD53jGv_lWOwWf5kmTAbd_HvLs,681
 pyHana/dataSync/__init__.py,sha256=146c1GXBxtTeRhnSeCKDOkQ9VwHET_LmM9mKa7MMQMg,64
-pyHana/dataSync/dartSync.py,sha256=EDXw60B_ePGHE-wLlEMg6F9kd37e6HCRc17_IKz12qM,3541
-pyHana/dataSync/ebestSync.py,sha256=p6aCCL1BIpjfPzc4u0lshrd2k9_Wfm08AHbgRtu-Y2k,12955
-pyHana/dataSync/kindSync.py,sha256=5dzaq3RGIVRa6qwkjPPG6v9T1VN4zJCiRMUH8eGqiM8,2083
-pyHana/dataSync/marketIndexSync.py,sha256=49d8lIzmwfadftGM0JvSuJSvu3sDlopXVd0FdfnjlzM,348
+pyHana/dataSync/dartSync.py,sha256=oKIa5W420UYrOElXZYSo5_eoyTj1x9D7VQ1FPJZXrRw,3535
+pyHana/dataSync/ebestSync.py,sha256=H5llxZFdXSEgFg_vN_fro5_PNJqfApJ2enKjMsLWW5E,13191
+pyHana/dataSync/kindSync.py,sha256=OAGCATAOmzyEw7mfVRmYm96KZSISJgqQseLXBZ25R6w,4342
+pyHana/dataSync/marketIndexSync.py,sha256=Lpl6PFMmJO0yTrnuUuyu4tjXBzW_zk5GdSQw6x-UXlo,380
 pyHana/innerIO/__init__.py,sha256=_-sW3TqzJuPThVJzoIZZqw3g91-1vCC7jaPS-Sxi184,73
-pyHana/innerIO/companyInfo.py,sha256=Daey3oc2xHM4R0FQh6EpPJ3KqeN4MjsevkO47PQ4ybA,1675
+pyHana/innerIO/companyInfo.py,sha256=vcqlMrvNhlhBW_GTgZsmeIqR1sXx5BXYkU1VqwsBews,1772
 pyHana/innerIO/marketIndex.py,sha256=aNGpKmOI7z4vmdtkCa3FcvAYIS9zjYddFrWRdRxIJXs,2208
-pyHana/innerIO/stockInfo.py,sha256=XZOVfNjd6GwbYuxgLx4oUj5pyABOm9kOYjsvse3GFfg,5646
+pyHana/innerIO/stockInfo.py,sha256=pyv_czkg7so4QJErtfP3CtjbZMUvGOMiC2j5FtNo6PI,4938
 pyHana/outerIO/__init__.py,sha256=4ov-xPtJCVADhp1TQ39PBaHJ_Md213hsMzRnGG5qWmE,72
-pyHana/outerIO/dart.py,sha256=MaIz73wzOp8oVSI-OQPKVSOuVBV0advwB6ZJDrbBE8w,5465
+pyHana/outerIO/dart.py,sha256=Hq4NI_gQwkFuquGywNO28hYen0cSfR39ajTRarndRnQ,5640
 pyHana/outerIO/ebest.py,sha256=RfxR_BwK7RBuHgIsc7_tp_Vi2eLd3OIXh-DpWdUCGEA,15300
-pyHana/outerIO/kind.py,sha256=ZunqvWQpG0s1nTv8QpdoXm1GKyh5VekIoVZVMcJUXsc,6535
-pyHana/outerIO/marketIndex.py,sha256=i6AUpzo8kuSM1TDogLV5uqv877DEVa00PtT6uCHUlaY,1800
-pyHana-0.0.2a4.dist-info/METADATA,sha256=teSntWgDOTgf20iAaphW2tflkSt2FpxHUTQDZeAST80,638
-pyHana-0.0.2a4.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-pyHana-0.0.2a4.dist-info/top_level.txt,sha256=HB0jmziPuwk5hJlWnvEbaS8QkKv84NPwX8F6le7Tm1Y,7
-pyHana-0.0.2a4.dist-info/RECORD,,
+pyHana/outerIO/kind.py,sha256=QcX4TrBCFBeqwLYocwwvJ4g9QctVOa-FN4B2XCyp6TI,7605
+pyHana/outerIO/marketIndex.py,sha256=m_NY52fgKcnFYP0aBXr8I-ShSd6uu0jXkH1Xlx3P30I,1882
+pyHana-0.0.2a5.dist-info/METADATA,sha256=842ZTS0_EY-sNfZl_W3t8Lk_V4frVtjc_icIoNyJgOo,638
+pyHana-0.0.2a5.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+pyHana-0.0.2a5.dist-info/top_level.txt,sha256=HB0jmziPuwk5hJlWnvEbaS8QkKv84NPwX8F6le7Tm1Y,7
+pyHana-0.0.2a5.dist-info/RECORD,,
```

