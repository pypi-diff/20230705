# Comparing `tmp/odoo_addon_helpdesk_mgmt_project-16.0.1.0.0.3-py3-none-any.whl.zip` & `tmp/odoo_addon_helpdesk_mgmt_project-16.0.1.0.1-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,33 +1,33 @@
-Zip file size: 47969 bytes, number of entries: 31
--rw-r--r--  2.0 unx     2968 b- defN 23-May-30 03:24 odoo/addons/helpdesk_mgmt_project/README.rst
--rw-r--r--  2.0 unx       47 b- defN 23-May-30 03:24 odoo/addons/helpdesk_mgmt_project/__init__.py
--rw-r--r--  2.0 unx      665 b- defN 23-May-30 03:24 odoo/addons/helpdesk_mgmt_project/__manifest__.py
--rw-r--r--  2.0 unx       19 b- defN 23-May-30 03:24 odoo/addons/helpdesk_mgmt_project/controllers/__init__.py
--rw-r--r--  2.0 unx      723 b- defN 23-May-30 03:24 odoo/addons/helpdesk_mgmt_project/controllers/main.py
--rw-r--r--  2.0 unx     3509 b- defN 23-May-30 03:24 odoo/addons/helpdesk_mgmt_project/i18n/es.po
--rw-r--r--  2.0 unx     3473 b- defN 23-May-30 03:24 odoo/addons/helpdesk_mgmt_project/i18n/es_AR.po
--rw-r--r--  2.0 unx     3473 b- defN 23-May-30 03:24 odoo/addons/helpdesk_mgmt_project/i18n/fr.po
--rw-r--r--  2.0 unx     3136 b- defN 23-May-30 03:24 odoo/addons/helpdesk_mgmt_project/i18n/helpdesk_mgmt_project.pot
--rw-r--r--  2.0 unx     3450 b- defN 23-May-30 03:24 odoo/addons/helpdesk_mgmt_project/i18n/hu.po
--rw-r--r--  2.0 unx     3469 b- defN 23-May-30 03:24 odoo/addons/helpdesk_mgmt_project/i18n/it.po
--rw-r--r--  2.0 unx     3443 b- defN 23-May-30 03:24 odoo/addons/helpdesk_mgmt_project/i18n/pt.po
--rw-r--r--  2.0 unx      114 b- defN 23-May-30 03:24 odoo/addons/helpdesk_mgmt_project/models/__init__.py
--rw-r--r--  2.0 unx      564 b- defN 23-May-30 03:24 odoo/addons/helpdesk_mgmt_project/models/helpdesk_ticket.py
--rw-r--r--  2.0 unx      215 b- defN 23-May-30 03:24 odoo/addons/helpdesk_mgmt_project/models/helpdesk_ticket_team.py
--rw-r--r--  2.0 unx      954 b- defN 23-May-30 03:24 odoo/addons/helpdesk_mgmt_project/models/project.py
--rw-r--r--  2.0 unx     2178 b- defN 23-May-30 03:24 odoo/addons/helpdesk_mgmt_project/models/project_task.py
--rw-r--r--  2.0 unx      321 b- defN 23-May-30 03:24 odoo/addons/helpdesk_mgmt_project/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx      122 b- defN 23-May-30 03:24 odoo/addons/helpdesk_mgmt_project/readme/DESCRIPTION.rst
--rwxr-xr-x  2.0 unx    23764 b- defN 23-May-30 03:24 odoo/addons/helpdesk_mgmt_project/static/description/icon.png
--rw-r--r--  2.0 unx    12274 b- defN 23-May-30 03:24 odoo/addons/helpdesk_mgmt_project/static/description/index.html
--rw-r--r--  2.0 unx       35 b- defN 23-May-30 03:24 odoo/addons/helpdesk_mgmt_project/tests/__init__.py
--rw-r--r--  2.0 unx     2949 b- defN 23-May-30 03:24 odoo/addons/helpdesk_mgmt_project/tests/test_helpdesk_ticket.py
--rw-r--r--  2.0 unx      471 b- defN 23-May-30 03:24 odoo/addons/helpdesk_mgmt_project/views/helpdesk_ticket_team_view.xml
--rw-r--r--  2.0 unx     1950 b- defN 23-May-30 03:24 odoo/addons/helpdesk_mgmt_project/views/helpdesk_ticket_view.xml
--rw-r--r--  2.0 unx     2404 b- defN 23-May-30 03:24 odoo/addons/helpdesk_mgmt_project/views/project_task_view.xml
--rw-r--r--  2.0 unx     2459 b- defN 23-May-30 03:24 odoo/addons/helpdesk_mgmt_project/views/project_view.xml
--rw-r--r--  2.0 unx     3646 b- defN 23-May-30 03:24 odoo_addon_helpdesk_mgmt_project-16.0.1.0.0.3.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-May-30 03:24 odoo_addon_helpdesk_mgmt_project-16.0.1.0.0.3.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 23-May-30 03:24 odoo_addon_helpdesk_mgmt_project-16.0.1.0.0.3.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     3413 b- defN 23-May-30 03:24 odoo_addon_helpdesk_mgmt_project-16.0.1.0.0.3.dist-info/RECORD
-31 files, 86305 bytes uncompressed, 42155 bytes compressed:  51.2%
+Zip file size: 48284 bytes, number of entries: 31
+-rw-r--r--  2.0 unx     3033 b- defN 23-Jul-05 16:37 odoo/addons/helpdesk_mgmt_project/README.rst
+-rw-r--r--  2.0 unx       47 b- defN 23-Jul-05 16:37 odoo/addons/helpdesk_mgmt_project/__init__.py
+-rw-r--r--  2.0 unx      665 b- defN 23-Jul-05 16:37 odoo/addons/helpdesk_mgmt_project/__manifest__.py
+-rw-r--r--  2.0 unx       19 b- defN 23-Jul-05 16:37 odoo/addons/helpdesk_mgmt_project/controllers/__init__.py
+-rw-r--r--  2.0 unx      723 b- defN 23-Jul-05 16:37 odoo/addons/helpdesk_mgmt_project/controllers/main.py
+-rw-r--r--  2.0 unx     3509 b- defN 23-Jul-05 16:37 odoo/addons/helpdesk_mgmt_project/i18n/es.po
+-rw-r--r--  2.0 unx     3473 b- defN 23-Jul-05 16:37 odoo/addons/helpdesk_mgmt_project/i18n/es_AR.po
+-rw-r--r--  2.0 unx     3473 b- defN 23-Jul-05 16:37 odoo/addons/helpdesk_mgmt_project/i18n/fr.po
+-rw-r--r--  2.0 unx     3136 b- defN 23-Jul-05 16:37 odoo/addons/helpdesk_mgmt_project/i18n/helpdesk_mgmt_project.pot
+-rw-r--r--  2.0 unx     3450 b- defN 23-Jul-05 16:37 odoo/addons/helpdesk_mgmt_project/i18n/hu.po
+-rw-r--r--  2.0 unx     3469 b- defN 23-Jul-05 16:37 odoo/addons/helpdesk_mgmt_project/i18n/it.po
+-rw-r--r--  2.0 unx     3443 b- defN 23-Jul-05 16:37 odoo/addons/helpdesk_mgmt_project/i18n/pt.po
+-rw-r--r--  2.0 unx      114 b- defN 23-Jul-05 16:37 odoo/addons/helpdesk_mgmt_project/models/__init__.py
+-rw-r--r--  2.0 unx      564 b- defN 23-Jul-05 16:37 odoo/addons/helpdesk_mgmt_project/models/helpdesk_ticket.py
+-rw-r--r--  2.0 unx      215 b- defN 23-Jul-05 16:37 odoo/addons/helpdesk_mgmt_project/models/helpdesk_ticket_team.py
+-rw-r--r--  2.0 unx     1425 b- defN 23-Jul-05 16:37 odoo/addons/helpdesk_mgmt_project/models/project.py
+-rw-r--r--  2.0 unx     2646 b- defN 23-Jul-05 16:37 odoo/addons/helpdesk_mgmt_project/models/project_task.py
+-rw-r--r--  2.0 unx      386 b- defN 23-Jul-05 16:37 odoo/addons/helpdesk_mgmt_project/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx      122 b- defN 23-Jul-05 16:37 odoo/addons/helpdesk_mgmt_project/readme/DESCRIPTION.rst
+-rwxr-xr-x  2.0 unx    23764 b- defN 23-Jul-05 16:37 odoo/addons/helpdesk_mgmt_project/static/description/icon.png
+-rw-r--r--  2.0 unx    12396 b- defN 23-Jul-05 16:37 odoo/addons/helpdesk_mgmt_project/static/description/index.html
+-rw-r--r--  2.0 unx       35 b- defN 23-Jul-05 16:37 odoo/addons/helpdesk_mgmt_project/tests/__init__.py
+-rw-r--r--  2.0 unx     2949 b- defN 23-Jul-05 16:37 odoo/addons/helpdesk_mgmt_project/tests/test_helpdesk_ticket.py
+-rw-r--r--  2.0 unx      471 b- defN 23-Jul-05 16:37 odoo/addons/helpdesk_mgmt_project/views/helpdesk_ticket_team_view.xml
+-rw-r--r--  2.0 unx     1950 b- defN 23-Jul-05 16:37 odoo/addons/helpdesk_mgmt_project/views/helpdesk_ticket_view.xml
+-rw-r--r--  2.0 unx     2404 b- defN 23-Jul-05 16:37 odoo/addons/helpdesk_mgmt_project/views/project_task_view.xml
+-rw-r--r--  2.0 unx     2459 b- defN 23-Jul-05 16:37 odoo/addons/helpdesk_mgmt_project/views/project_view.xml
+-rw-r--r--  2.0 unx     3709 b- defN 23-Jul-05 16:37 odoo_addon_helpdesk_mgmt_project-16.0.1.0.1.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jul-05 16:37 odoo_addon_helpdesk_mgmt_project-16.0.1.0.1.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-Jul-05 16:37 odoo_addon_helpdesk_mgmt_project-16.0.1.0.1.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     3406 b- defN 23-Jul-05 16:37 odoo_addon_helpdesk_mgmt_project-16.0.1.0.1.dist-info/RECORD
+31 files, 87552 bytes uncompressed, 42486 bytes compressed:  51.5%
```

## zipnote {}

```diff
@@ -75,20 +75,20 @@
 
 Filename: odoo/addons/helpdesk_mgmt_project/views/project_task_view.xml
 Comment: 
 
 Filename: odoo/addons/helpdesk_mgmt_project/views/project_view.xml
 Comment: 
 
-Filename: odoo_addon_helpdesk_mgmt_project-16.0.1.0.0.3.dist-info/METADATA
+Filename: odoo_addon_helpdesk_mgmt_project-16.0.1.0.1.dist-info/METADATA
 Comment: 
 
-Filename: odoo_addon_helpdesk_mgmt_project-16.0.1.0.0.3.dist-info/WHEEL
+Filename: odoo_addon_helpdesk_mgmt_project-16.0.1.0.1.dist-info/WHEEL
 Comment: 
 
-Filename: odoo_addon_helpdesk_mgmt_project-16.0.1.0.0.3.dist-info/top_level.txt
+Filename: odoo_addon_helpdesk_mgmt_project-16.0.1.0.1.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo_addon_helpdesk_mgmt_project-16.0.1.0.0.3.dist-info/RECORD
+Filename: odoo_addon_helpdesk_mgmt_project-16.0.1.0.1.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/helpdesk_mgmt_project/README.rst

```diff
@@ -70,14 +70,18 @@
 
   * David Alonso
 
 * `Sygel <https://www.sygel.es>`_:
 
   * Manuel Regidor
 
+* `ALBA Software <https://www.albasoft.com>`_:
+
+  * Rafa Morant
+
 Maintainers
 ~~~~~~~~~~~
 
 This module is maintained by the OCA.
 
 .. image:: https://odoo-community.org/logo.png
    :alt: Odoo Community Association
```

## odoo/addons/helpdesk_mgmt_project/__manifest__.py

```diff
@@ -1,13 +1,13 @@
 # License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl).
 
 {
     "name": "Helpdesk Project",
     "summary": "Add the option to select project in the tickets.",
-    "version": "16.0.1.0.0",
+    "version": "16.0.1.0.1",
     "license": "AGPL-3",
     "category": "After-Sales",
     "author": "PuntSistemes S.L.U., " "Odoo Community Association (OCA)",
     "website": "https://github.com/OCA/helpdesk",
     "depends": ["helpdesk_mgmt", "project"],
     "data": [
         "views/helpdesk_ticket_view.xml",
```

## odoo/addons/helpdesk_mgmt_project/models/project.py

```diff
@@ -16,12 +16,23 @@
     )
     todo_ticket_count = fields.Integer(
         string="Number of tickets", compute="_compute_ticket_count", store=True
     )
 
     @api.depends("ticket_ids", "ticket_ids.stage_id")
     def _compute_ticket_count(self):
+        HelpdeskTicket = self.env["helpdesk.ticket"]
+        domain = [("project_id", "in", self.ids)]
+        fields = ["project_id"]
+        groupby = ["project_id"]
+        counts = {
+            pr["project_id"][0]: pr["project_id_count"]
+            for pr in HelpdeskTicket.read_group(domain, fields, groupby)
+        }
+        domain.append(("closed", "=", False))
+        counts_todo = {
+            pr["project_id"][0]: pr["project_id_count"]
+            for pr in HelpdeskTicket.read_group(domain, fields, groupby)
+        }
         for record in self:
-            record.ticket_count = len(record.ticket_ids)
-            record.todo_ticket_count = len(
-                record.ticket_ids.filtered(lambda ticket: not ticket.closed)
-            )
+            record.ticket_count = counts.get(record.id, 0)
+            record.todo_ticket_count = counts_todo.get(record.id, 0)
```

## odoo/addons/helpdesk_mgmt_project/models/project_task.py

```diff
@@ -16,36 +16,48 @@
     )
     todo_ticket_count = fields.Integer(
         string="Number of tickets", compute="_compute_ticket_count", store=True
     )
 
     @api.depends("ticket_ids", "ticket_ids.stage_id")
     def _compute_ticket_count(self):
+        HelpdeskTicket = self.env["helpdesk.ticket"]
+        invname = "task_id"
+        domain = [(invname, "in", self.ids)]
+        fields = [invname]
+        groupby = [invname]
+        counts = {
+            pr[invname][0]: pr[f"{invname}_count"]
+            for pr in HelpdeskTicket.read_group(domain, fields, groupby)
+        }
+        domain.append(("closed", "=", False))
+        counts_todo = {
+            pr[invname][0]: pr[f"{invname}_count"]
+            for pr in HelpdeskTicket.read_group(domain, fields, groupby)
+        }
         for record in self:
-            record.ticket_count = len(record.ticket_ids)
-            record.todo_ticket_count = len(
-                record.ticket_ids.filtered(lambda ticket: not ticket.closed)
-            )
+            record.ticket_count = counts.get(record.id, 0)
+            record.todo_ticket_count = counts_todo.get(record.id, 0)
 
     def action_view_ticket(self):
         result = self.env["ir.actions.act_window"]._for_xml_id(
             "helpdesk_mgmt.action_helpdesk_ticket_kanban_from_dashboard"
         )
         # choose the view_mode accordingly
-        if not self.ticket_ids or len(self.ticket_ids) > 1:
+        if not self.ticket_ids or self.ticket_count > 1:
             result["domain"] = "[('id','in',%s)]" % (self.ticket_ids.ids)
             res = self.env.ref("helpdesk_mgmt.ticket_view_tree", False)
             tree_view = [(res and res.id or False, "tree")]
             if "views" in result:
                 result["views"] = tree_view + [
                     (state, view) for state, view in result["views"] if view != "tree"
                 ]
             else:
                 result["views"] = tree_view
-        elif len(self.ticket_ids) == 1:
+        elif self.ticket_count == 1:
             res = self.env.ref("helpdesk_mgmt.ticket_view_form", False)
             form_view = [(res and res.id or False, "form")]
             if "views" in result:
                 result["views"] = form_view + [
                     (state, view) for state, view in result["views"] if view != "form"
                 ]
             else:
```

## odoo/addons/helpdesk_mgmt_project/readme/CONTRIBUTORS.rst

```diff
@@ -13,7 +13,11 @@
 * `Solvos <https://www.solvos.es>`_:
 
   * David Alonso
 
 * `Sygel <https://www.sygel.es>`_:
 
   * Manuel Regidor
+
+* `ALBA Software <https://www.albasoft.com>`_:
+
+  * Rafa Morant
```

## odoo/addons/helpdesk_mgmt_project/static/description/index.html

### odoo/addons/helpdesk_mgmt_project/static/description/index.html

```diff
@@ -470,14 +470,21 @@
             <li>
               <a class="reference external" href="https://www.sygel.es">Sygel</a>
               :
               <ul>
                 <li>Manuel Regidor</li>
               </ul>
             </li>
+            <li>
+              <a class="reference external" href="https://www.albasoft.com">ALBA Software</a>
+              :
+              <ul>
+                <li>Rafa Morant</li>
+              </ul>
+            </li>
           </ul>
         </div>
         <div class="section" id="maintainers">
           <h2>
             <a class="toc-backref" href="#id5">Maintainers</a>
           </h2>
           <p>This module is maintained by the OCA.</p>
```

## Comparing `odoo_addon_helpdesk_mgmt_project-16.0.1.0.0.3.dist-info/METADATA` & `odoo_addon_helpdesk_mgmt_project-16.0.1.0.1.dist-info/METADATA`

 * *Files 2% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: odoo-addon-helpdesk-mgmt-project
-Version: 16.0.1.0.0.3
+Version: 16.0.1.0.1
 Summary: Add the option to select project in the tickets.
 Home-page: https://github.com/OCA/helpdesk
 Author: PuntSistemes S.L.U., Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
@@ -88,14 +88,18 @@
 
   * David Alonso
 
 * `Sygel <https://www.sygel.es>`_:
 
   * Manuel Regidor
 
+* `ALBA Software <https://www.albasoft.com>`_:
+
+  * Rafa Morant
+
 Maintainers
 ~~~~~~~~~~~
 
 This module is maintained by the OCA.
 
 .. image:: https://odoo-community.org/logo.png
    :alt: Odoo Community Association
```

